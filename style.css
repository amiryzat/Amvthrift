/* --- RESET & BASICS --- */
* { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Helvetica Neue', sans-serif; }
body { background-color: #121212; color: #ffffff; position: relative; overflow-x: hidden; }
body::before { content: ""; position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; background-image: radial-gradient(circle at 15% 50%, rgba(74, 222, 128, 0.03), transparent 25%), radial-gradient(circle at 85% 30%, rgba(59, 130, 246, 0.03), transparent 25%), radial-gradient(circle at 50% 80%, rgba(168, 85, 247, 0.03), transparent 25%); filter: blur(80px); background-size: 180% 180%; animation: backgroundMove 15s ease-in-out infinite alternate; }
@keyframes backgroundMove { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

/* --- NAVBAR --- */
nav { display: flex; justify-content: space-between; align-items: center; padding: 20px 40px; border-bottom: 1px solid #333; background-color: rgba(18, 18, 18, 0.8); backdrop-filter: blur(10px); position: sticky; top: 0; z-index: 100; }
.logo { font-size: 24px; font-weight: bold; letter-spacing: -1px; background: linear-gradient(to right, #ffffff 0%, #444444 50%, #ffffff 100%); background-size: 200% auto; color: #fff; background-clip: text; -webkit-background-clip: text; -webkit-text-fill-color: transparent; animation: shine 3s linear infinite; }
@keyframes shine { to { background-position: 200% center; } }
.menu { display: flex; gap: 30px; }
.menu button { background: none; border: none; color: #666; font-size: 16px; cursor: pointer; position: relative; padding-bottom: 5px; transition: color 0.3s ease; }
.menu button:hover { color: #bbb; }
.menu button.active-btn { color: #fff; font-weight: bold; }
.menu button.active-btn::after { content: ''; position: absolute; bottom: -2px; left: 0; width: 100%; height: 2px; background-color: #fff; box-shadow: 0 0 10px rgba(255, 255, 255, 0.5); }

/* --- LAYOUT --- */
.page { padding: 40px; max-width: 1200px; margin: 0 auto; padding-bottom: 100px; }
header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 30px; position: relative; z-index: 50; }
h1 { font-size: 48px; letter-spacing: -2px; }
.breadcrumb { margin-bottom: 10px; }
.back-link { background: none; border: none; color: #888; cursor: pointer; font-size: 14px; display: inline-flex; align-items: center; gap: 8px; padding: 5px 0; transition: color 0.3s ease; }
.back-link:hover { color: #fff; }
.back-link svg { transition: transform 0.3s ease; }
.back-link:hover svg { transform: translateX(-4px); }

/* --- ANIMATIONS --- */
@keyframes slideUpFade { 0% { opacity: 0; transform: translateY(20px); } 100% { opacity: 1; transform: translateY(0); } }
@keyframes fadeInOnly { 0% { opacity: 0; } 100% { opacity: 1; } }
.animate-enter header { opacity: 0; animation: slideUpFade 0.5s ease-out forwards; }
.animate-enter .section-header { opacity: 0; animation: slideUpFade 0.5s ease-out forwards; animation-delay: 0.1s; }
.animate-enter .table-container { opacity: 0; animation: fadeInOnly 0.6s ease-out forwards; animation-delay: 0.15s; }
.animate-enter .analytics-grid { opacity: 0; animation: slideUpFade 0.6s ease-out forwards; animation-delay: 0.2s; }
.table-row-animate { opacity: 0; animation: slideUpFade 0.4s ease-out forwards; }

/* --- TABLES --- */
.category-section { margin-bottom: 50px; }
.section-header { display: flex; align-items: center; gap: 10px; margin-bottom: 15px; }
h3 { font-size: 20px; font-weight: normal; color: #eee; }
.count-badge { background: #333; color: #aaa; padding: 2px 8px; border-radius: 12px; font-size: 12px; font-weight: bold; }
.sold-container { opacity: 0.7; }
.table-container { border: 1px solid #333; border-radius: 8px; overflow: hidden; position: relative; z-index: 1; background-color: rgba(18, 18, 18, 0.6); backdrop-filter: blur(5px); }
table { width: 100%; border-collapse: collapse; text-align: left; table-layout: fixed; }
th { background: rgba(26, 26, 26, 0.8); padding: 15px; color: #888; font-weight: normal; font-size: 14px; white-space: nowrap; }
td { padding: 12px 15px; border-top: 1px solid #333; white-space: normal; word-wrap: break-word; vertical-align: middle; }
tbody tr:not(.summary-row) { transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1), box-shadow 0.3s cubic-bezier(0.25, 0.8, 0.25, 1), background-color 0.2s ease; }
tbody tr:not(.summary-row):hover { background-color: #222; transform: scale(1.015); box-shadow: 0 10px 25px rgba(0,0,0,0.5); z-index: 10; position: relative; border-radius: 4px; cursor: default; }
.summary-row { background-color: rgba(21, 21, 21, 0.85); font-weight: bold; color: #eee; position: relative; }
.summary-row td { border-top: 2px solid #444; padding: 15px; }

/* --- ANALYTICS --- */
.analytics-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; margin-top: 50px; }
.analytics-card { 
    background: rgba(30, 30, 30, 0.3); 
    backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
    border: 1px solid rgba(255, 255, 255, 0.08); 
    border-radius: 12px; padding: 25px; 
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2); 
}
.progress-header { display: flex; justify-content: space-between; margin-bottom: 15px; font-size: 14px; color: #ccc; }
.progress-bar-bg { background: rgba(255, 255, 255, 0.1); height: 8px; border-radius: 4px; overflow: hidden; margin-bottom: 20px; }
.progress-bar-fill { background: linear-gradient(90deg, #3b82f6, #60a5fa); height: 100%; transition: width 0.5s ease; }
.stats-row { display: flex; justify-content: space-around; text-align: center; }
.stat-val { display: block; font-size: 20px; font-weight: bold; margin-top: 5px; }
.financial-card { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
.fin-box { background: rgba(0, 0, 0, 0.3); padding: 15px; border-radius: 8px; text-align: center; border: 1px solid rgba(255, 255, 255, 0.05); }
.fin-box.highlight { grid-column: span 2; background: rgba(59, 130, 246, 0.15); border: 1px solid rgba(59, 130, 246, 0.3); color: #fff; }
.stat-val.large { font-size: 24px; color: #fff; }
.text-green { color: #4ade80; }
.text-red { color: #f87171; }
.text-blue { color: #60a5fa; }
.chart-container { display: flex; align-items: center; gap: 20px; }
.pie-chart { width: 120px; height: 120px; border-radius: 50%; background: conic-gradient(#67e8f9 0% 50%, #38bdf8 50% 80%, #1e3a8a 80% 100%); position: relative; flex-shrink: 0; mask: radial-gradient(farthest-side, transparent 60%, black 61%); -webkit-mask: radial-gradient(farthest-side, transparent 60%, black 61%); }
.chart-legend { display: flex; flex-direction: column; gap: 8px; font-size: 12px; width: 100%; }
.legend-item { display: flex; align-items: center; justify-content: space-between; }
.dot { width: 8px; height: 8px; border-radius: 50%; margin-right: 8px; display: inline-block; }
.dot.rolling { background: #67e8f9; }
.dot.saving { background: #38bdf8; }
.dot.personal { background: #1e3a8a; }
.l-val { font-weight: bold; color: #fff; }

/* --- SALES LIST --- */
.sales-list-container { display: flex; flex-direction: column; gap: 15px; }
.sales-card { background-color: rgba(30, 30, 30, 0.7); border: 1px solid #333; border-radius: 8px; padding: 20px; display: flex; justify-content: space-between; align-items: center; transition: all 0.3s; animation: slideUpFade 0.5s ease-out forwards; cursor: pointer; }
.sales-card:hover { background-color: #2a2a2a; transform: scale(1.01); border-color: #555; }
.sales-info { display: flex; flex-direction: column; gap: 5px; pointer-events: none; }
.sales-name { font-size: 18px; font-weight: bold; color: #fff; }
.sales-meta { font-size: 13px; color: #888; display: flex; align-items: center; gap: 10px; }
.sales-status { font-weight: bold; font-size: 13px; }
.status-upcoming { color: #facc15; } 
.status-live { color: #f87171; text-transform: uppercase; letter-spacing: 0.5px; animation: pulse 2s infinite; }
.status-completed { color: #4ade80; }
@keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.7; } 100% { opacity: 1; } }
.sales-actions { display: flex; align-items: center; gap: 15px; }
.sales-actions button { z-index: 10; position: relative; }

/* --- INPUTS & UTILS --- */
.actions { display: flex; gap: 10px; align-items: flex-start; }
.search-wrapper { position: relative; width: 300px; }
input, select { 
    padding: 10px 12px; 
    background: #222; 
    border: 1px solid #444; 
    color: #fff; 
    border-radius: 4px; 
    outline: none; 
    margin-bottom: 5px; 
    font-size: 14px;
    transition: border-color 0.2s;
}
input:focus, select:focus { border-color: #fff; }
input[type="date"], input[type="time"] { appearance: none; -webkit-appearance: none; position: relative; color-scheme: dark; }
input[type="date"]::-webkit-calendar-picker-indicator, input[type="time"]::-webkit-calendar-picker-indicator { filter: invert(1); cursor: pointer; opacity: 0.7; }
input[type="date"]::-webkit-calendar-picker-indicator:hover, input[type="time"]::-webkit-calendar-picker-indicator:hover { opacity: 1; }
#search-box, #sales-search-box, #overview-search-box, #select-inv-search { width: 100%; padding-right: 30px; height: 42px; margin-bottom: 0; }
.clear-btn { position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: none; border: none; color: #888; font-size: 14px; cursor: pointer; display: none; }
.clear-btn:hover { color: #fff; }
.empty-message { padding: 60px 0; text-align: center; color: #888; font-size: 15px; background: transparent; border: none; margin-top: 30px; opacity: 0; animation: slideUpFade 0.5s ease-out forwards; }
.input-label { font-size: 12px; color: #888; margin-bottom: 4px; display: block; margin-top: 5px; }
.add-group { position: relative; display: flex; flex-direction: column; align-items: flex-end; z-index: 60; }
.primary-btn { background-color: #fff; color: #000; padding: 0 20px; height: 42px; display: inline-flex; align-items: center; justify-content: center; border: none; border-radius: 4px; font-weight: bold; cursor: pointer; white-space: nowrap; }
.primary-btn:hover { background-color: #ddd; }
.sort-container { position: absolute; top: 45px; right: -10px; z-index: 1000; }
#sort-btn { background: none; border: none; color: #888; cursor: pointer; padding: 5px; border-radius: 50%; }
#sort-btn:hover { color: #fff; background-color: rgba(255, 255, 255, 0.1); }
.sort-dropdown { display: none; position: absolute; top: 35px; right: 0; background-color: #1a1a1a; border: 1px solid #333; border-radius: 6px; width: 160px; box-shadow: 0 5px 20px rgba(0,0,0,0.8); }
.sort-dropdown.show { display: block; }
.sort-option { padding: 10px 15px; font-size: 13px; color: #ccc; cursor: pointer; border-bottom: 1px solid #222; }
.sort-option:hover { background-color: #333; color: #fff; }
.profit-text { color: #4ade80; font-weight: bold; }
.loss-text { color: #f87171; font-weight: bold; }
.item-qty { color: #888; font-size: 12px; margin-left: 8px; display: inline-block; }
.row-number { color: #555; font-size: 13px; font-family: monospace; }
.status-select { padding: 6px 10px; border-radius: 6px; border: 1px solid #333; width: auto; font-weight: bold; cursor: pointer; appearance: none; text-align: center; }
.status-select.available { background-color: rgba(74, 222, 128, 0.1); color: #4ade80; border-color: rgba(74, 222, 128, 0.2); }
.status-select.sold { background-color: rgba(248, 113, 113, 0.1); color: #f87171; border-color: rgba(248, 113, 113, 0.2); }
.action-cell { display: flex; gap: 10px; align-items: center; }
.edit-btn { background: none; border: 1px solid #444; color: #fff; padding: 4px 10px; border-radius: 4px; cursor: pointer; font-size: 12px; }
.edit-btn:hover { background: #333; }
.delete-btn { background: none; border: none; color: #666; cursor: pointer; font-size: 12px; }
.delete-btn:hover { color: #f87171; text-decoration: underline; }
.remove-btn { background: none; border: none; color: #666; cursor: pointer; font-size: 12px; }
.remove-btn:hover { color: #facc15; text-decoration: underline; }

/* MODALS */
.modal { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.6); backdrop-filter: blur(5px); justify-content: center; align-items: center; z-index: 1000; }
.modal-content { background: #1a1a1a; padding: 30px; width: 400px; border-radius: 8px; border: 1px solid #333; display: flex; flex-direction: column; gap: 10px; }
.modal-content input, .modal-content select { width: 100%; }
.row { display: flex; gap: 10px; }
.modal-actions { display: flex; justify-content: flex-end; gap: 10px; margin-top: 10px; }
.cancel-btn { background: none; border: none; color: #888; cursor: pointer; }
.danger-btn { background-color: #f87171; color: #fff; padding: 8px 16px; border: none; border-radius: 4px; font-weight: bold; cursor: pointer; }
.remove-btn-confirm { background-color: #facc15; color: #000; padding: 8px 16px; border: none; border-radius: 4px; font-weight: bold; cursor: pointer; }
.remove-btn-confirm:hover { background-color: #eab308; }
.modal-tabs { display: flex; border-bottom: 1px solid #333; margin-bottom: 15px; gap: 10px; }
.tab-btn { background: none; border: none; padding: 10px 15px; color: #888; cursor: pointer; border-bottom: 2px solid transparent; transition: 0.2s; font-size: 14px; }
.tab-btn:hover { color: #bbb; }
.tab-btn.active { color: #fff; border-bottom-color: #fff; font-weight: bold; }
.selection-list { max-height: 300px; overflow-y: auto; border: 1px solid #333; border-radius: 4px; margin-top: 10px; }
.select-item-row { display: flex; justify-content: space-between; padding: 12px; border-bottom: 1px solid #333; cursor: pointer; transition: 0.2s; }
.select-item-row:hover { background: #222; }
.select-item-row.selected { background: rgba(59, 130, 246, 0.2); border-left: 3px solid #3b82f6; }
.item-chk { pointer-events: none; }
.inventory-total-container { background-color: rgba(30, 30, 30, 0.4); border: 1px solid #333; border-radius: 8px; padding: 15px 20px; margin-top: 20px; display: flex; justify-content: space-between; align-items: center; font-weight: bold; color: #ccc; animation: slideUpFade 0.5s ease-out forwards; }
.total-count-value { color: #fff; font-size: 18px; }

/* === SALES SECTIONS === */
.sales-section { margin-bottom: 40px; animation: slideUpFade 0.5s ease-out forwards; }
.section-title { font-size: 16px; margin-bottom: 15px; text-transform: uppercase; letter-spacing: 1px; font-weight: bold; display: inline-block; padding-bottom: 5px; border-bottom: 2px solid transparent; }
.text-live { color: #f87171; border-color: #f87171; }
.text-upcoming { color: #facc15; border-color: #facc15; }
.text-completed { color: #4ade80; border-color: #4ade80; }

/* === CUSTOM TIME PICKER === */
.time-picker-group { display: flex; align-items: center; background: #222; border: 1px solid #444; border-radius: 4px; padding: 0 5px; margin-bottom: 5px; position: relative; height: 38px; }
.time-picker-group:focus-within { border-color: #fff; }
.time-input { background: transparent !important; border: none !important; width: 35px; text-align: center; padding: 5px 0 !important; margin: 0 !important; font-size: 14px; -moz-appearance: textfield; }
.time-input::-webkit-outer-spin-button, .time-input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
.time-colon { color: #888; font-weight: bold; margin: 0 2px; }
.time-toggle-btn { background: #333; border: 1px solid #555; color: #fff; font-size: 12px; padding: 2px 6px; border-radius: 3px; cursor: pointer; margin-left: 5px; width: 35px; }
.time-toggle-btn:hover { background: #444; }
.time-dropdown-trigger { background: none; border: none; color: #888; font-size: 10px; padding: 0 5px; cursor: pointer; margin-left: auto; height: 100%; }
.time-dropdown-trigger:hover { color: #fff; }
.time-dropdown-list { display: none; position: absolute; top: 100%; left: 0; right: 0; background: #1a1a1a; border: 1px solid #333; border-radius: 4px; max-height: 200px; overflow-y: auto; z-index: 1000; box-shadow: 0 5px 15px rgba(0,0,0,0.5); }
.time-dropdown-list.show { display: block; }
.time-option { padding: 8px 12px; font-size: 13px; color: #ccc; cursor: pointer; border-bottom: 1px solid #222; }
.time-option:hover { background-color: #333; color: #fff; }

/* ==========================================================================
   MOBILE ONLY STYLES (Max-Width 768px)
   Everything inside here ONLY affects phone screens.
   ========================================================================== */
@media screen and (max-width: 768px) {
    /* 1. Reset Page & Layout */
    .page { padding: 15px; padding-bottom: 80px; }
    nav { padding: 15px 20px; }
    .logo { font-size: 20px; }
    .menu { gap: 15px; }
    .menu button { font-size: 14px; }

    /* 2. Headers & Actions Stacking */
    header { flex-direction: column; gap: 15px; align-items: stretch; }
    h1 { font-size: 28px; }
    .actions { flex-direction: column; width: 100%; }
    .search-wrapper { width: 100%; }
    .add-group { flex-direction: row; width: 100%; gap: 10px; }
    .primary-btn { flex-grow: 1; }
    .sort-container { position: static; margin: 0; }
    #sort-btn { height: 42px; width: 42px; display: flex; align-items: center; justify-content: center; background: #333; border-radius: 4px; }

    /* 3. Analytics Grid Stacking */
    .analytics-grid { grid-template-columns: 1fr; gap: 15px; margin-top: 30px; }
    .chart-container { justify-content: center; }

    /* 4. SCROLLABLE TABLES (HORIZONTAL SCROLL) */
    /* This fixes the overlapping/squashed issue by allowing the table to scroll */
    .table-container {
        display: block;
        width: 100%;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch; /* Smooth scroll on iOS */
        padding-bottom: 10px; /* Space for scrollbar */
    }

    table {
        min-width: 800px; /* FORCE table to be wide enough to not wrap content */
        width: 100%;
    }

    /* Prevent wrapping so columns stay aligned */
    th, td {
        white-space: nowrap; 
        padding: 10px 12px;
    }
    
    /* Ensure action buttons don't stack weirdly */
    .action-cell {
        flex-wrap: nowrap;
    }

    /* 5. Sales Cards (List View) */
    .sales-card {
        flex-direction: column;
        align-items: flex-start;
        gap: 15px;
    }
    .sales-info {
        width: 100%;
    }
    .sales-actions {
        width: 100%;
        justify-content: space-between;
        margin-top: 5px;
    }

    /* 6. Modals */
    .modal-content { width: 90% !important; max-height: 85vh; overflow-y: auto; padding: 20px; }
    #sales-modal .row { flex-direction: row; gap: 10px; } 
    #select-inv-modal .modal-content { height: 80vh; display: flex; flex-direction: column; }
    .selection-list { flex-grow: 1; max-height: none; }
    
    /* 7. Input Fixes */
    input, select { font-size: 16px; }
    .table-container, .analytics-card, .sales-card, .modal-content { backdrop-filter: none; background-color: #1e1e1e; }

    /* 2. Remove gradient moving background */
     body::before {
        filter: none !important;
        animation: none !important;
        background-image: none !important;
        background-color: #121212;
     }

     /* 2. Remove Expensive Glass Filters */
    nav, 
    .table-container, 
    .analytics-card,
    .sales-card,
    .modal {
        backdrop-filter: none !important;
        -webkit-backdrop-filter: none !important;
        background-color: #1e1e1e !important;
        box-shadow: none !important;
        border: 1px solid #333;
    }

    /* 3. Stop Constant Logo Repainting */
    .logo {
        animation: none !important;
        background: none !important;
        color: #fff !important;
        -webkit-text-fill-color: #fff !important;
    }


    /* 4. Improve Table Scrolling */
    .table-container {
        overflow-x: auto; /* Ensure tables can scroll sideways */
        -webkit-overflow-scrolling: touch; /* Smooth scroll on iOS */
    }
}